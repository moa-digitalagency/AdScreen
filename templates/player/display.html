<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ screen.name }} - Shabaka AdScreen Player</title>
    <link rel="icon" type="image/svg+xml" href="/static/favicon-player.svg">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/player.css') }}">
</head>
<body data-screen-code="{{ screen.unique_code }}">
    <div id="startScreen">
        <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="2" y="7" width="20" height="15" rx="2" ry="2"/>
            <polyline points="17,2 12,7 7,2"/>
        </svg>
        <h1 style="font-size: 28px; margin-top: 20px;">{{ screen.name }}</h1>
        <p style="color: rgba(255,255,255,0.6); margin-top: 8px;">{{ screen.resolution_width }}x{{ screen.resolution_height }} - {{ screen.orientation }}</p>
        <button id="startBtn">
            ‚ñ∂ Lancer la playlist
        </button>
        <p style="color: rgba(255,255,255,0.4); margin-top: 30px; font-size: 12px;">
            F11: Plein √©cran | M: Son/Muet | Espace: Pause
        </p>
    </div>

    <div id="loading" class="loading hidden">
        <div class="spinner"></div>
    </div>

    <div id="overlayHeader" class="overlay-header" style="display: none;"></div>
    <div id="overlayBody" class="overlay-body" style="display: none;"></div>
    <div id="overlayTopLeft" class="overlay-corner" style="display: none; position: fixed; top: 10px; left: 10px; z-index: 50;"></div>
    <div id="overlayTopRight" class="overlay-corner" style="display: none; position: fixed; top: 10px; right: 10px; z-index: 50;"></div>
    <div id="overlayBottomLeft" class="overlay-corner" style="display: none; position: fixed; bottom: 10px; left: 10px; z-index: 50;"></div>
    <div id="overlayBottomRight" class="overlay-corner" style="display: none; position: fixed; bottom: 10px; right: 10px; z-index: 50;"></div>
    <div id="overlayCustom" class="overlay-custom" style="display: none; position: fixed; z-index: 50;"></div>
    
    <div id="player">
        <img id="imageContent" style="display: none;" />
        <video id="videoContent" style="display: none;" playsinline></video>
        <video id="iptvContent" style="display: none;" autoplay playsinline></video>
    </div>
    
    <div id="iptvInfo" style="display: none; position: fixed; top: 20px; left: 20px; background: rgba(0,0,0,0.7); backdrop-filter: blur(10px); padding: 12px 20px; border-radius: 8px; color: white; font-family: sans-serif; font-size: 14px; z-index: 60;">
        <div style="display: flex; align-items: center; gap: 8px;">
            <span style="color: #a855f7;">üì∫</span>
            <span id="iptvChannelName">OnlineTV</span>
        </div>
    </div>
    
    <div id="qualityIndicator">
        <span id="qualityLabel">Auto</span>
        <span id="qualityBadge" class="quality-badge quality-high">HD</span>
        <div class="bandwidth-bar">
            <div id="bandwidthFill" class="bandwidth-fill" style="width: 50%;"></div>
        </div>
        <span id="bandwidthText">-- Mbps</span>
    </div>
    
    <script src="{{ url_for('static', filename='js/hls.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/mpegts.min.js') }}"></script>
    
    <div id="overlayFooter" class="overlay-footer" style="display: none;"></div>

    <div id="status">
        <span class="status-dot status-playing" id="statusDot"></span>
        <span id="statusText">En ligne</span>
    </div>

    <div id="info">
        <div id="currentInfo">En attente...</div>
        <div id="nextInfo" style="color: rgba(255,255,255,0.5); margin-top: 4px;"></div>
    </div>

    <div id="debugInfo"></div>

    <div id="controls">
        <button class="control-btn">
            <span id="pauseIcon">‚è∏</span> Pause
        </button>
        <button class="control-btn">
            <span id="muteIcon">üîä</span> <span id="muteText">Son</span>
        </button>
        <button class="control-btn">
            ‚õ∂ Plein √©cran
        </button>
        <button class="control-btn">
            ‚èª D√©connecter
        </button>
    </div>

    <script src="{{ url_for('static', filename='js/player.js') }}"></script>
</body>
</html>
