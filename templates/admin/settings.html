{% extends "admin/base.html" %}

{% block page_title %}Paramètres{% endblock %}

{% block main_content %}
<div class="max-w-4xl">
    <form method="POST" action="{{ url_for('admin.settings') }}" enctype="multipart/form-data">
        <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                    <i class="fas fa-search text-blue-600"></i>
                </div>
                <div>
                    <h2 class="text-lg font-semibold text-gray-800">SEO & Référencement</h2>
                    <p class="text-sm text-gray-500">Optimisez le référencement de votre plateforme</p>
                </div>
            </div>
            
            <div class="grid gap-4">
                <div>
                    <label class="label">Titre du site</label>
                    <input type="text" name="site_title" value="{{ seo_settings.site_title }}" 
                           class="input-field" placeholder="Shabaka AdScreen - Location d'écrans publicitaires">
                </div>
                <div>
                    <label class="label">Description du site</label>
                    <textarea name="site_description" rows="3" class="input-field" 
                              placeholder="Description pour les moteurs de recherche">{{ seo_settings.site_description }}</textarea>
                </div>
                <div>
                    <label class="label">Mots-clés (séparés par des virgules)</label>
                    <input type="text" name="meta_keywords" value="{{ seo_settings.meta_keywords }}" 
                           class="input-field" placeholder="écran publicitaire, location, publicité">
                </div>
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="label">Image OG (partage réseaux sociaux)</label>
                        <input type="file" name="og_image_file" accept="image/*" class="input-field">
                        {% if seo_settings.og_image %}
                        <p class="text-xs text-gray-500 mt-1">Image actuelle: {{ seo_settings.og_image }}</p>
                        {% endif %}
                    </div>
                    <div>
                        <label class="label">Favicon / Logo du site</label>
                        <input type="file" name="favicon_file" accept="image/*,.ico,.svg" class="input-field">
                        {% if platform_settings.favicon %}
                        <p class="text-xs text-gray-500 mt-1">Favicon actuel: {{ platform_settings.favicon }}</p>
                        {% endif %}
                    </div>
                </div>
                <div>
                    <label class="label">Google Analytics ID</label>
                    <input type="text" name="google_analytics_id" value="{{ seo_settings.google_analytics_id }}" 
                           class="input-field" placeholder="G-XXXXXXXXXX">
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center">
                    <i class="fas fa-code text-indigo-600"></i>
                </div>
                <div>
                    <h2 class="text-lg font-semibold text-gray-800">Code personnalisé</h2>
                    <p class="text-sm text-gray-500">Ajoutez du code dans le head du site (scripts, styles, pixels)</p>
                </div>
            </div>
            
            <div>
                <label class="label">Code Head (HTML/JS/CSS)</label>
                <textarea name="head_code" rows="6" class="input-field font-mono text-sm" 
                          placeholder="<!-- Ajoutez vos scripts, pixels de tracking, etc. -->">{{ platform_settings.head_code }}</textarea>
                <p class="text-xs text-gray-500 mt-1">Ce code sera injecté dans le &lt;head&gt; de toutes les pages publiques.</p>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-pink-100 rounded-lg flex items-center justify-center">
                    <i class="fas fa-share-alt text-pink-600"></i>
                </div>
                <div>
                    <h2 class="text-lg font-semibold text-gray-800">Réseaux sociaux</h2>
                    <p class="text-sm text-gray-500">Liens vers vos pages sur les réseaux sociaux</p>
                </div>
            </div>
            
            <div class="grid md:grid-cols-2 gap-4">
                <div>
                    <label class="label"><i class="fab fa-facebook text-blue-600 mr-2"></i>Facebook</label>
                    <input type="url" name="facebook_url" value="{{ platform_settings.facebook_url }}" 
                           class="input-field" placeholder="https://facebook.com/...">
                </div>
                <div>
                    <label class="label"><i class="fab fa-instagram text-pink-600 mr-2"></i>Instagram</label>
                    <input type="url" name="instagram_url" value="{{ platform_settings.instagram_url }}" 
                           class="input-field" placeholder="https://instagram.com/...">
                </div>
                <div>
                    <label class="label"><i class="fab fa-twitter text-blue-400 mr-2"></i>Twitter/X</label>
                    <input type="url" name="twitter_url" value="{{ platform_settings.twitter_url }}" 
                           class="input-field" placeholder="https://twitter.com/...">
                </div>
                <div>
                    <label class="label"><i class="fab fa-linkedin text-blue-700 mr-2"></i>LinkedIn</label>
                    <input type="url" name="linkedin_url" value="{{ platform_settings.linkedin_url }}" 
                           class="input-field" placeholder="https://linkedin.com/...">
                </div>
                <div>
                    <label class="label"><i class="fab fa-youtube text-red-600 mr-2"></i>YouTube</label>
                    <input type="url" name="youtube_url" value="{{ platform_settings.youtube_url }}" 
                           class="input-field" placeholder="https://youtube.com/...">
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-cyan-100 rounded-lg flex items-center justify-center">
                    <i class="fas fa-address-card text-cyan-600"></i>
                </div>
                <div>
                    <h2 class="text-lg font-semibold text-gray-800">Informations de contact</h2>
                    <p class="text-sm text-gray-500">Coordonnées affichées sur le site</p>
                </div>
            </div>
            
            <div class="grid md:grid-cols-2 gap-4">
                <div>
                    <label class="label">Téléphone de contact</label>
                    <input type="tel" name="contact_phone" value="{{ platform_settings.contact_phone }}" 
                           class="input-field" placeholder="+33 1 23 45 67 89">
                </div>
                <div>
                    <label class="label">Adresse</label>
                    <input type="text" name="contact_address" value="{{ platform_settings.contact_address }}" 
                           class="input-field" placeholder="123 Rue Exemple, 75000 Paris">
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                    <i class="fas fa-percentage text-green-600"></i>
                </div>
                <div>
                    <h2 class="text-lg font-semibold text-gray-800">Monétisation</h2>
                    <p class="text-sm text-gray-500">Configurez les commissions de la plateforme</p>
                </div>
            </div>
            
            <div class="grid md:grid-cols-3 gap-4">
                <div>
                    <label class="label">Commission par défaut (%)</label>
                    <input type="number" step="0.5" name="default_commission_rate" 
                           value="{{ platform_settings.default_commission_rate }}" 
                           class="input-field" min="0" max="100">
                    <p class="text-xs text-gray-500 mt-1">Appliquée aux nouveaux établissements</p>
                </div>
                <div>
                    <label class="label">Commission minimum (%)</label>
                    <input type="number" step="0.5" name="min_commission_rate" 
                           value="{{ platform_settings.min_commission_rate }}" 
                           class="input-field" min="0" max="100">
                </div>
                <div>
                    <label class="label">Commission maximum (%)</label>
                    <input type="number" step="0.5" name="max_commission_rate" 
                           value="{{ platform_settings.max_commission_rate }}" 
                           class="input-field" min="0" max="100">
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center">
                    <i class="fas fa-cog text-purple-600"></i>
                </div>
                <div>
                    <h2 class="text-lg font-semibold text-gray-800">Configuration générale</h2>
                    <p class="text-sm text-gray-500">Paramètres généraux de la plateforme</p>
                </div>
            </div>
            
            <div class="grid gap-4">
                <div>
                    <label class="label">Nom de la plateforme</label>
                    <input type="text" name="platform_name" value="{{ platform_settings.platform_name }}" 
                           class="input-field" placeholder="Shabaka AdScreen">
                </div>
                <div>
                    <label class="label">Email de support</label>
                    <input type="email" name="support_email" value="{{ platform_settings.support_email }}" 
                           class="input-field" placeholder="support@shabaka-adscreen.com">
                </div>
                <div>
                    <label class="label">Devise par défaut</label>
                    <select name="default_currency" class="input-field">
                        {% for currency in currencies %}
                        <option value="{{ currency.code }}" {% if platform_settings.default_currency == currency.code %}selected{% endif %}>
                            {{ currency.flag }} {{ currency.code }} - {{ currency.name }} ({{ currency.symbol }})
                        </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="flex items-center gap-3 pt-2">
                    <input type="checkbox" name="maintenance_mode" id="maintenance_mode" 
                           class="w-4 h-4 text-primary-600 rounded border-gray-300"
                           {% if platform_settings.maintenance_mode %}checked{% endif %}>
                    <label for="maintenance_mode" class="text-sm text-gray-700">
                        <span class="font-medium">Mode maintenance</span>
                        <span class="text-gray-500 ml-1">- Désactive temporairement l'accès à la plateforme</span>
                    </label>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center">
                    <i class="fas fa-copyright text-gray-600"></i>
                </div>
                <div>
                    <h2 class="text-lg font-semibold text-gray-800">Pied de page</h2>
                    <p class="text-sm text-gray-500">Personnalisez le texte du pied de page</p>
                </div>
            </div>
            
            <div class="grid gap-4">
                <div>
                    <label class="label">Texte de copyright</label>
                    <input type="text" name="copyright_text" value="{{ platform_settings.copyright_text }}" 
                           class="input-field" placeholder="© Shabaka AdScreen. Tous droits réservés.">
                    <p class="text-xs text-gray-500 mt-1">Ex: © Shabaka AdScreen. Tous droits réservés.</p>
                </div>
                <div>
                    <label class="label">Texte "Fait avec"</label>
                    <input type="text" name="made_with_text" value="{{ platform_settings.made_with_text }}" 
                           class="input-field" placeholder="Fait avec ❤️ en France">
                    <p class="text-xs text-gray-500 mt-1">Ex: Fait avec ❤️ en France</p>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                    <i class="fab fa-whatsapp text-green-600"></i>
                </div>
                <div>
                    <h2 class="text-lg font-semibold text-gray-800">WhatsApp Admin</h2>
                    <p class="text-sm text-gray-500">Numéro pour recevoir les demandes d'inscription</p>
                </div>
            </div>
            
            <div class="grid gap-4">
                <div>
                    <label class="label">Numéro WhatsApp (format international)</label>
                    <input type="text" name="admin_whatsapp_number" value="{{ platform_settings.admin_whatsapp_number }}" 
                           class="input-field" placeholder="33612345678">
                    <p class="text-xs text-gray-500 mt-1">Format sans + ni espaces (ex: 33612345678 pour +33 6 12 34 56 78)</p>
                </div>
            </div>
        </div>

        <div class="flex justify-end">
            <button type="submit" class="btn-primary">
                <i class="fas fa-save mr-2"></i>
                Enregistrer les paramètres
            </button>
        </div>
    </form>
</div>
{% endblock %}
