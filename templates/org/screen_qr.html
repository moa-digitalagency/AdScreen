{% extends "org/base.html" %}

{% block page_title %}QR Code - {{ screen.name }}{% endblock %}

{% block main_content %}
<div class="mb-4 sm:mb-6">
    <a href="{{ url_for('org.screen_detail', screen_id=screen.id) }}" class="text-gray-500 hover:text-gray-700 text-sm">
        <i class="fas fa-arrow-left mr-2"></i>Retour à l'écran
    </a>
</div>

<div class="grid lg:grid-cols-2 gap-4 sm:gap-6">
    <div class="space-y-4 sm:space-y-6">
        <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-4 sm:p-6">
            <div class="flex items-center gap-3 sm:gap-4 mb-4 sm:mb-6">
                <div class="w-10 h-10 sm:w-12 sm:h-12 bg-purple-100 rounded-xl flex items-center justify-center">
                    <i class="fas fa-qrcode text-purple-600 text-lg sm:text-xl"></i>
                </div>
                <div>
                    <h2 class="text-lg sm:text-xl font-bold text-gray-800">QR Code Simple</h2>
                    <p class="text-gray-500 text-xs sm:text-sm">Minimaliste</p>
                </div>
            </div>
            <div class="flex justify-center mb-4 p-3 bg-gray-50 rounded-lg">
                <img src="data:image/png;base64,{{ qr_image }}" alt="QR Code Simple" class="w-40 h-40">
            </div>
            <p class="text-xs sm:text-sm text-gray-600 text-center mb-4">QR Code simple pour petits espaces</p>
            <a href="data:image/png;base64,{{ qr_image }}" download="qr-simple-{{ screen.name }}.png" 
               class="block text-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold rounded-lg transition text-sm">
                <i class="fas fa-download mr-2"></i>Télécharger
            </a>
        </div>

        <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-4 sm:p-6">
            <div class="flex items-center gap-3 sm:gap-4 mb-4 sm:mb-6">
                <div class="w-10 h-10 sm:w-12 sm:h-12 bg-emerald-100 rounded-xl flex items-center justify-center">
                    <i class="fas fa-qrcode text-emerald-600 text-lg sm:text-xl"></i>
                </div>
                <div>
                    <h2 class="text-lg sm:text-xl font-bold text-gray-800">QR Code Complet</h2>
                    <p class="text-gray-500 text-xs sm:text-sm">Avec informations</p>
                </div>
            </div>
            <div class="flex justify-center mb-4 p-3 bg-gray-50 rounded-lg">
                <img src="data:image/png;base64,{{ enhanced_qr_image }}" alt="QR Code Complet" class="w-40 h-40">
            </div>
            <p class="text-xs sm:text-sm text-gray-600 text-center mb-4">Inclut infos établissement et résolution</p>
            <a href="data:image/png;base64,{{ enhanced_qr_image }}" download="qr-complet-{{ screen.name }}.png" 
               class="block text-center px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white font-semibold rounded-lg transition text-sm">
                <i class="fas fa-download mr-2"></i>Télécharger
            </a>
        </div>
    </div>

    <div class="space-y-4 sm:space-y-6">
        <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-4 sm:p-6">
            <div class="flex items-center gap-3 sm:gap-4 mb-4 sm:mb-6">
                <div class="w-10 h-10 sm:w-12 sm:h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                    <i class="fas fa-link text-blue-600 text-lg sm:text-xl"></i>
                </div>
                <h2 class="text-lg sm:text-xl font-bold text-gray-800">Lien de réservation</h2>
            </div>
            <div class="flex flex-col gap-3">
                <input type="text" value="{{ booking_url }}" readonly
                    class="px-4 py-2 border border-gray-200 rounded-lg bg-gray-50 text-xs sm:text-sm font-mono text-gray-600 focus:outline-none">
                <button onclick="navigator.clipboard.writeText('{{ booking_url }}'); this.innerHTML='<i class=\'fas fa-check text-green-500\'></i> Copié!'; setTimeout(() => this.innerHTML='<i class=\'fas fa-copy\'></i> Copier', 2000);" 
                    class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition text-sm">
                    <i class="fas fa-copy mr-2"></i>Copier
                </button>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-4 sm:p-6">
            <div class="flex items-center gap-3 sm:gap-4 mb-4 sm:mb-6">
                <div class="w-10 h-10 sm:w-12 sm:h-12 bg-purple-100 rounded-xl flex items-center justify-center">
                    <i class="fas fa-tv text-purple-600 text-lg sm:text-xl"></i>
                </div>
                <h2 class="text-lg sm:text-xl font-bold text-gray-800">Infos écran</h2>
            </div>
            <div class="space-y-3 text-sm">
                <div>
                    <p class="text-gray-500 text-xs uppercase font-medium">Établissement</p>
                    <p class="font-semibold text-gray-800">{{ screen.organization.name }}</p>
                </div>
                <div>
                    <p class="text-gray-500 text-xs uppercase font-medium">Résolution</p>
                    <p class="font-mono font-semibold text-gray-800">{{ screen.resolution_width }}x{{ screen.resolution_height }}</p>
                </div>
                <div>
                    <p class="text-gray-500 text-xs uppercase font-medium">Orientation</p>
                    <p class="font-semibold text-gray-800 capitalize">{{ screen.orientation }}</p>
                </div>
                <div>
                    <p class="text-gray-500 text-xs uppercase font-medium">Types acceptés</p>
                    <p class="font-semibold text-gray-800">
                        {% if screen.accepts_images %}<span class="text-blue-600"><i class="fas fa-image mr-1"></i>Images</span>{% endif %}
                        {% if screen.accepts_images and screen.accepts_videos %}<span class="mx-2">•</span>{% endif %}
                        {% if screen.accepts_videos %}<span class="text-purple-600"><i class="fas fa-video mr-1"></i>Vidéos</span>{% endif %}
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

    <div class="flex items-center justify-center">
        <button onclick="window.print()" class="inline-flex items-center gap-2 px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold rounded-xl transition no-print">
            <i class="fas fa-print"></i>
            Imprimer cette page
        </button>
    </div>
</div>

<style>
@media print {
    .no-print { display: none !important; }
    body { background: white !important; }
    .shadow-lg, .shadow-md, .shadow-sm { box-shadow: none !important; }
}
</style>
{% endblock %}
